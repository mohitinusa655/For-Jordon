<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For You ‚ù§Ô∏è</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(circle, #ffd1dc, #ff9a9e);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-family: "Segoe Script", cursive;
    overflow: hidden;
    text-align: center;
    padding: 20px;
  }
  h1 { color: #b8003c; margin-bottom: 20px; }
  
  /* Buttons */
  .btn-container { position: relative; }
  button {
    font-size: 22px;
    padding: 14px 34px;
    border-radius: 18px;
    border: none;
    cursor: pointer;
    margin: 10px;
    transition: transform 0.2s;
  }
  button:active { transform: scale(0.95); }
  #yes { background: #ff2f6d; color: white; box-shadow: 0 4px 15px rgba(255, 47, 109, 0.4); }
  #no { background: #999; color: white; position: absolute; }

  /* Lyrics */
  #lyrics {
    font-size: 28px;
    margin-top: 40px;
    height: 80px; /* Fixed height to prevent jumping */
    color: #fff;
    text-shadow: 0 2px 5px rgba(0,0,0,0.1);
    pointer-events: none;
  }
  .word {
    opacity: 0;
    display: inline-block;
    margin: 0 4px;
    transform: translateY(10px);
    transition: all 0.5s ease;
  }
  .word.visible {
    opacity: 1;
    transform: translateY(0);
    color: #b8003c;
    text-shadow: 0 0 10px #ff7aa2;
  }

  /* Proposal Screen */
  #proposal { display: none; animation: fadeIn 2s ease; }
  #name {
    font-size: 42px;
    color: #ff2f6d;
    text-shadow: 0 0 15px #ff7aa2;
    animation: glow 2s infinite alternate;
  }
  #ring {
    font-size: 100px;
    cursor: pointer;
    margin: 20px 0;
    animation: sparkle 1.5s infinite alternate;
    transition: transform 0.3s;
  }
  #ring:hover { transform: scale(1.1); }
  #finalMsg { font-size: 22px; color: #7a0026; margin-top: 10px; min-height: 30px;}

  /* Animations */
  .float { position: fixed; font-size: 28px; animation: rise 6s linear forwards; pointer-events: none; }
  .firework { position: fixed; font-size: 40px; animation: explode 1s ease-out forwards; pointer-events: none; }

  @keyframes rise { from { transform: translateY(110vh); opacity: 1; } to { transform: translateY(-10vh); opacity: 0; } }
  @keyframes sparkle { from { transform: scale(1); filter: drop-shadow(0 0 5px gold); } to { transform: scale(1.2); filter: drop-shadow(0 0 20px gold); } }
  @keyframes explode { from { transform: scale(0); opacity: 1; } to { transform: scale(3); opacity: 0; } }
  @keyframes glow { from { text-shadow: 0 0 10px #ff7aa2; } to { text-shadow: 0 0 25px #ff2f6d; } }
  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
</style>
</head>
<body>

<div id="initial-screen">
  <h1 id="question">Will you be my Valentine? ‚ù§Ô∏è</h1>
  <div class="btn-container">
    <button id="yes">Yes üíñ</button>
    <button id="no">No üò¢</button>
  </div>
</div>

<div id="lyrics"></div>

<div id="proposal">
  <div id="name"></div>
  <div id="ring">üíç</div>
  <h1>Will you be mine forever? ‚ù§Ô∏è</h1>
  <div id="finalMsg">Tap the ring üíç</div>
</div>

<audio id="song" src="perfect.mp3" preload="auto"></audio>

<script>
// ==========================================
// üîß CONFIGURATION
// ==========================================
const herName = "Jordon"; 
const vocalStart = 18.5; // Seconds where song vocals start

// Lyrics Timeline (in Seconds relative to click)
// calculated assuming song starts playing immediately
const lyricsData = [
  { text: "I found a love...", start: 0.5, duration: 3 },
  { text: "For me...", start: 4.5, duration: 2 },
  { text: "Darling, just dive right in...", start: 8.5, duration: 3.5 },
  { text: "And follow my lead...", start: 13.0, duration: 3 },
  { text: "Well, I found a girl, beautiful and sweet...", start: 17.0, duration: 5 }
];

// ==========================================

const song = document.getElementById("song");
const yesBtn = document.getElementById("yes");
const noBtn = document.getElementById("no");
const lyricsDiv = document.getElementById("lyrics");
const proposal = document.getElementById("proposal");
const initialScreen = document.getElementById("initial-screen");
const nameDiv = document.getElementById("name");

nameDiv.textContent = herName;

// Make "No" button move away
noBtn.addEventListener("mouseover", () => {
  const x = Math.random() * (window.innerWidth - 100);
  const y = Math.random() * (window.innerHeight - 50);
  noBtn.style.position = "fixed";
  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";
});

yesBtn.onclick = () => {
  // 1. UI Changes
  document.getElementById("question").style.display = "none";
  yesBtn.style.display = "none";
  noBtn.style.display = "none";
  
  // 2. Play Song
  song.currentTime = vocalStart;
  song.volume = 1;
  song.play().catch(error => {
    console.log("Audio play failed (user didn't interact or file missing):", error);
    alert("Audio might not play if 'perfect.mp3' is missing, but the animation will continue!");
  });

  // 3. Start Visuals
  startHearts();
  
  // 4. Start Lyrics Sequence
  lyricsData.forEach(line => {
    setTimeout(() => {
      showText(line.text, line.duration * 1000); // Convert sec to ms
    }, line.start * 1000);
  });

  // 5. Show Proposal after last line (approx 24 seconds)
  setTimeout(() => {
    lyricsDiv.style.opacity = 0;
    fadeOutSong();
    setTimeout(() => {
      lyricsDiv.style.display = "none";
      proposal.style.display = "block";
    }, 1000);
  }, 24000);
};

function showText(text, duration) {
  lyricsDiv.innerHTML = ""; // Clear old text
  const words = text.split(" ");
  
  words.forEach((word, index) => {
    const span = document.createElement("span");
    span.textContent = word;
    span.className = "word";
    lyricsDiv.appendChild(span);

    // Stagger the appearance of each word
    setTimeout(() => {
      span.classList.add("visible");
    }, index * (duration / words.length)); 
  });
}

function fadeOutSong() {
  const fade = setInterval(() => {
    if (song.volume > 0.05) song.volume -= 0.05;
    else { song.pause(); clearInterval(fade); }
  }, 200);
}

// Final Ring Interaction
const ring = document.getElementById("ring");
ring.onclick = () => {
  startFireworks();
  document.getElementById("finalMsg").textContent = "You are my today, my tomorrow, my forever ‚ù§Ô∏è";
};

// Background Effects
function startHearts() {
  setInterval(() => {
    const el = document.createElement("div");
    el.className = "float";
    el.textContent = Math.random() > 0.5 ? "‚ù§Ô∏è" : "üåπ";
    el.style.left = Math.random() * 100 + "vw";
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 6000);
  }, 400);
}

function startFireworks() {
  for(let i=0; i<10; i++) {
    setTimeout(() => {
      const fw = document.createElement("div");
      fw.className = "firework";
      fw.textContent = "üéÜ";
      fw.style.left = Math.random() * 100 + "vw";
      fw.style.top = Math.random() * 80 + "vh";
      document.body.appendChild(fw);
      setTimeout(() => fw.remove(), 1000);
    }, i * 300);
  }
}
</script>
</body>
</html>
